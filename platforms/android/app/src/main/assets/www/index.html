<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="initial-scale=1, maximum-scale=1, user-scalable=no, width=device-width">
        <title>MOX</title>
        <link rel="stylesheet" href="http://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.css" />
        <script src="http://code.jquery.com/jquery-1.11.1.min.js"></script>
        <script src="http://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.js"></script>
        <script type="text/javascript" src="cordova.js"></script>
        <link rel="stylesheet" href="css.css" />
        <script>  
            
            $(function(){setTimeout(hideSplash, 2000);});
            function hideSplash(){$.mobile.changePage("#home", "fade");}
            
        </script>
    </head>
    <body>    
        <div data-role="page" id="splash"> 
            <div class="splash">
                <!-- <img src="splash.png" alt="splash" / style="height:812px;width:375px;"> -->
                <div data-role="content">
                    <h1 style="text-align: center">MOX</h1>
                </div>
            </div>
        </div>

        <!-- ################   HOMESCREEN    ################ --> 
        <div data-role="page" id="home"> 
             <script>
                var deviceName = cordova.plugin.device-name;
                console.log(deviceName.name) // e.g: Becvert's iPad
 
                deviceName.get(function success(name) {
                    console.log(name);
                }, function failure(error) {
                    console.log(error);
                });
            
                request.addEventListener("readystatechange", processRequest, false);
                request.open('GET', "http://moxbackend20180406094815.azurewebsites.net/api/Device", true);
                // request.setRequestHeader("APIKey", "");
                // request.setRequestHeader("Authorization", "Basic " + btoa("maurmair_moxAdm"+":" + "RandomPw!"));

                request.send();
                function processRequest(e){
                    if (request.readyState == 4 && request.status == 200) {
                        var response = JSON.parse(request.responseText);
                        if (response.length > 0) {
                            for (var i = 0; i < response.length; i++){
                                printObject(response[i]);
                            }
                        }
                    }
                }

                function printObject(jsonObject){
                    $("#testapi ul").append("<li>Device Naam: " +jsonObject.DeviceId + "</li>");
                    $("#testapi ul").append("<li>Coupled Device: " + jsonObject.CoupledDevice + "</li>");
                }
            
            </script> 
            <div data-role="content">
                <div data-role="content">                             
                    <h1>WELKOM</h1>
                    <div id="DeviceName"></div>
                    <div id="testapi">
                            <ul>

                            </ul>
                    </div>                    
                </div>                        
            </div>
            <div data-role="footer">
                <a href="#actieveMinutenScreen" class="ui-btn ui-icon-clock ui-btn-icon-right">Actieve minuten</a>
                <a href="#aantalStappenScreen" class="ui-btn ui-icon-info ui-btn-icon-right">Aantal stappen</a>
                <a href="#instellingenScreen" class="ui-btn ui-icon-gear ui-btn-icon-right">Instellingen</a>
            </div>
        </div>

        <!-- ################   LOCATIONSERVICE SCREEN    ################ -->
        <div data-role="page" id="locationScreen">
            <div data-role="content">
                <h1>LOCATION</h1>
            </div>
            <div data-role="footer">
                <a href="#actieveMinutenScreen" class="ui-btn ui-icon-clock ui-btn-icon-right">Actieve minuten</a>
                <a href="#aantalStappenScreen" class="ui-btn ui-icon-info ui-btn-icon-right">Aantal stappen</a>
                <a href="#instellingenScreen" class="ui-btn ui-icon-gear ui-btn-icon-right">Instellingen</a>
            </div>
        </div>

        <!-- ################   BLUETOOTH SCREEN    ################ -->
        <div data-role="page" id="btScreen">
                <div data-role="content">
                    <h1>BLUETOOTH</h1>
                </div>
                <div data-role="footer">
                    <a href="#actieveMinutenScreen" class="ui-btn ui-icon-clock ui-btn-icon-right">Actieve minuten</a>
                    <a href="#aantalStappenScreen" class="ui-btn ui-icon-info ui-btn-icon-right">Aantal stappen</a>
                    <a href="#instellingenScreen" class="ui-btn ui-icon-gear ui-btn-icon-right">Instellingen</a>
                </div>
        </div>

        <!-- ################   KOPPELEN MOX SCREEN    ################ -->
        <!-- ################   TODO:                  ################ -->
        <!-- ################   * Bevestiging laten    ################ -->
        <!-- ################     wanneer er gekoppeld ################ -->
        <!-- ################     is                   ################ -->                
        <div data-role="page" id="koppelMoxScreen">
            <div data-role="content">
                <h1>Selecteer mox:</h1>
            </div>
            <div data-role="footer">
                <a href="#actieveMinutenScreen" class="ui-btn ui-icon-clock ui-btn-icon-right">Actieve minuten</a>
                <a href="#aantalStappenScreen" class="ui-btn ui-icon-info ui-btn-icon-right">Aantal stappen</a>
                <a href="#instellingenScreen" class="ui-btn ui-icon-gear ui-btn-icon-right">Instellingen</a>
            </div>
        </div>


        <!-- ################   ACTIEVE MIN SCREEN    ################ -->
        <div data-role="page" id="actieveMinutenScreen">
            <div data-role="content">
                <h1>ACTIEVE MIN</h1>
            </div>
            <div data-role="footer">
                <a href="#actieveMinutenScreen" class="ui-btn ui-icon-clock ui-btn-icon-right">Actieve minuten</a>
                <a href="#aantalStappenScreen" class="ui-btn ui-icon-info ui-btn-icon-right">Aantal stappen</a>
                <a href="#instellingenScreen" class="ui-btn ui-icon-gear ui-btn-icon-right">Instellingen</a>
            </div>
        </div>


        <!-- ################   STAPPEN SCREEN    ################ -->
        <div data-role="page" id="aantalStappenScreen">
            <div data-role="content">
                <h1>AANTAL STAPPEN</h1>
            </div>
            <div data-role="footer">
                <a href="#actieveMinutenScreen" class="ui-btn ui-icon-clock ui-btn-icon-right">Actieve minuten</a>
                <a href="#aantalStappenScreen" class="ui-btn ui-icon-info ui-btn-icon-right">Aantal stappen</a>
                <a href="#instellingenScreen" class="ui-btn ui-icon-gear ui-btn-icon-right">Instellingen</a>
            </div>
        </div>

        <!-- ################   INSTELLINGEN SCREEN    ################ -->
        <div data-role="page" id="instellingenScreen">
            <div data-role="content">
                <h1>INSTELLINGEN</h1>
            </div>
            <div data-role="body-instellingen">
                <>INSTELLINGEN</h1>
            </div>

            <div data-role="footer">
                <a href="#actieveMinutenScreen" class="ui-btn ui-icon-clock ui-btn-icon-right">Actieve minuten</a>
                <a href="#aantalStappenScreen" class="ui-btn ui-icon-info ui-btn-icon-right">Aantal stappen</a>
                <a href="#instellingenScreen" class="ui-btn ui-icon-gear ui-btn-icon-right">Instellingen</a>
            </div>
        </div>
        <script>
            // $.ajax({
            // url: 'http://moxbackend20180406094815.azurewebsites.net/api/Device',
            // datatype: 'jsonp',
            // type: 'GET',            
            // success: function(data) {
            //     $("#testapi ul").append(data.DeviceId) ;
            // },
            // error: function(error) {
            //     // alert('Status: ' + error);
            // },            
            // });
            // Assign handlers immediately after making the request,
            // and remember the jqxhr object for this request
            // var jqxhr = $.get( "http://localhost:61497/api/Device", function(data) {
            // alert( "success" );
            // })
            // .done(function(data) {
            //     $("#testapi").text(data.DeviceId) ;
            // })
            // .fail(function() {
            //     alert( "error" );
            // })
            // ;
            
            // // Perform other work here ...
            
            // // Set another completion function for the request above
            // jqxhr.always(function() {
            // alert( "second finished" );
            // });
        </script>
        <!-- <script type="text/javascript" src="cordova.js"></script> -->
    </body>
</html>
